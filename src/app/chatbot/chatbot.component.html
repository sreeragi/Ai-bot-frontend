<div class="flex flex-col h-screen font-sans"
     [ngStyle]="{
       'background-color': '#f9fafb',
       'font-family': styleConfig?.fontFamily,
       'font-size.px': styleConfig?.fontSize
     }">

  <!-- ✅ Header with Dynamic Logo -->
  <div class="p-4 flex items-center justify-center"
       [ngStyle]="{
         'background-color': styleConfig?.headerColor,
         'color': '#fff'
       }">

    <!-- ✅ Show Logo if available -->
    <ng-container *ngIf="styleConfig?.logo; else noLogo">
      <img [src]="styleConfig?.logo"
           alt="Logo"
           class="w-10 h-10 rounded-full mr-3 object-cover" />
    </ng-container>

    <!-- ✅ Fallback if no logo -->
    <ng-template #noLogo>
      <div class="w-10 h-10 rounded-full bg-gray-300 mr-3 flex items-center justify-center text-white font-bold">
        <i class="fa-solid fa-user"></i>
      </div>
    </ng-template>

    <h2 class="text-lg font-bold text-center ">Chat with us</h2>
  </div>

  <!-- ✅ Chat Body -->
  <div #chatBody class="flex-1 overflow-y-auto p-4 space-y-4"
  [ngStyle]="{'background-color': styleConfig?.theme === 'Dark' ? '#39404b' : '#f9fafb'}">
    <div *ngFor="let msg of messages" class="flex items-start"
         [ngClass]="msg.isUser ? 'justify-end' : 'justify-start'">

      <!-- ✅ Bot Icon -->
      <div *ngIf="!msg.isUser"
           class="w-8 h-8 text-white rounded-full flex items-center justify-center mr-2"
           [ngStyle]="{'background-color': styleConfig?.buttonColor}">
        <i class="fa-solid fa-robot"></i>
      </div>

      <!-- ✅ Chat Bubble -->
      <div class="flex flex-col">
        <div class="px-4 py-2 rounded-lg max-w-xs break-words"
             [ngStyle]="msg.isUser
               ? {'background-color': styleConfig?.userMsgBg, 'color': styleConfig?.userTextColor}
               : {'background-color': styleConfig?.botMsgBg, 'color': styleConfig?.botTextColor}">
          {{ msg.text }}
        </div>
        <span class="text-xs text-gray-500 mt-1">{{ msg.time }}</span>
      </div>
    </div>

    <!-- ✅ Typing Indicator -->
    <div *ngIf="isTyping" class="flex justify-start">
      <div class="rounded-lg px-3 py-2 flex space-x-1"
           [ngStyle]="{'background-color': styleConfig?.botMsgBg}">
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce"></span>
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-150"></span>
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-300"></span>
      </div>
    </div>
  </div>

  <!-- ✅ Footer -->
  <div class="p-4 border-t flex items-center bg-white"[ngStyle]="{'background-color': styleConfig?.theme === 'Dark' ? '#39404b' : '#f9fafb'}">
    <input type="text"
           [(ngModel)]="userMessage"
           (keyup.enter)="sendMessage()"
           placeholder="Type a message..."
           class="flex-1 border-2 border-gray-300 rounded-full px-4 py-2 focus:outline-none "
           [ngStyle]="{'border-color': styleConfig?.buttonColor}" />
    <button (click)="sendMessage()"
            class="ml-3 text-white rounded-full p-3 hover:opacity-90"
            [ngStyle]="{'background-color': styleConfig?.buttonColor}">
      <i class="fas fa-paper-plane"></i>
    </button>
  </div>
</div>
