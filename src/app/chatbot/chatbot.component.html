<div class="flex flex-col h-screen font-sans"
     [ngStyle]="{'background-color': styleConfig.bgColor || '#f9fafb'}">

  <!-- Header -->
  <div class="p-4 flex items-center justify-center"
       [ngStyle]="{'background-color': styleConfig.headerBg, 'color': '#fff'}">
    <h2 class="text-lg font-bold text-center">ðŸ’¬ {{ styleConfig.headerText }}</h2>
  </div>

  <!-- Chat Body -->
  <div #chatBody class="flex-1 overflow-y-auto p-4 space-y-4">
    <div *ngFor="let msg of messages" class="flex items-start"
         [ngClass]="msg.isUser ? 'justify-end' : 'justify-start'">

      <!-- Bot Icon (only for bot messages) -->
      <div *ngIf="!msg.isUser"
           class="w-8 h-8 text-white rounded-full flex items-center justify-center mr-2"
           [ngStyle]="{'background-color': styleConfig.primaryColor}">
        <i class="fa-solid fa-robot"></i>
      </div>

      <!-- Chat Bubble -->
      <div class="flex flex-col">
        <div class="px-4 py-2 rounded-lg max-w-xs"
             [ngStyle]="msg.isUser
               ? {'background-color': styleConfig.userMessageBg, 'color': styleConfig.userMessageText}
               : {'background-color': styleConfig.botMessageBg, 'color': '#000'}">
          {{ msg.text }}
        </div>
        <span class="text-xs text-gray-500 mt-1">{{ msg.time }}</span>
      </div>
    </div>

    <!-- Typing Indicator -->
    <div *ngIf="isTyping" class="flex justify-start">
      <div class="rounded-lg px-3 py-2 flex space-x-1"
           [ngStyle]="{'background-color': styleConfig.botMessageBg}">
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce"></span>
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-150"></span>
        <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-300"></span>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="p-4 border-t flex items-center bg-white">
    <input type="text"
           [(ngModel)]="userMessage"
           (keyup.enter)="sendMessage()"
           placeholder="Type a message..."
           class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none"
           [ngStyle]="{'border-color': styleConfig.primaryColor}" />
    <button (click)="sendMessage()"
            class="ml-3 text-white rounded-full p-3 hover:opacity-90"
            [ngStyle]="{'background-color': styleConfig.primaryColor}">
      <i class="fas fa-paper-plane"></i>
    </button>
  </div>
</div>
